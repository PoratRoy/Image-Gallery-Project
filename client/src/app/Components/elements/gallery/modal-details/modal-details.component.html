<div class="modal-continer" *ngIf="visible">
  <form #imageForm="ngForm" (ngSubmit)="onSubmit()" novalidate>

    <header class="modal-header">      
        <div class="modal-title">
            <input type="text" required #caption="ngModel"
             [class.is-invalid]="caption.invalid && caption.touched" name="imageCaption" [(ngModel)]="image.caption"/>    
        </div>     
        <div *ngIf="caption.errors && (caption.invalid || caption.touched)">
            <small *ngIf="caption.errors.required">Caption is required</small>
        </div>
        <button class="modal-exist" (click)="close()">X</button>
    </header>

    <section class="modal-body">

      <img class="modal-image" [src]="'data:image/jpeg;base64,' + image.src" />

      <div class="modal-details">

        <div class="modal-category">
            <select name="category" [(ngModel)]="image.categories">
                <option value="">No categories</option>
                <option *ngFor="let category of categories">{{category}}</option>
            </select>
        </div>
        
        <button (click)="taggleMap()">map</button>
        <small *ngIf="isCoordsSelected">coords selected</small>    

        <div class="modal-favorite"> 
            <input name="favorite" [(ngModel)]="image.favorite" type="checkbox"/>
            <label>Favorite</label>
        </div>

        <div class="modal-private"> 
            <input name="private" [(ngModel)]="image.private" type="checkbox"/>
            <label>Private</label>
        </div>

      </div>
    </section>

    <footer>
      <button type="submit" [disabled]="imageForm.form.invalid">Save</button>
      <div *ngIf="isSubmitted">
        changes saved
      </div>
    </footer>
  </form>
  <app-map *ngIf="mapVisible" (coords)="handleCoordsFromMap($event)" [latitude]="latitude" [longitude]="longitude"></app-map>
</div>
